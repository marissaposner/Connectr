import requests

def get_token_prices(token_address):
    base_url = "https://api.coingecko.com/api/v3/coins/ethereum/contract/{token_address}/market_chart"
    params = {
        "vs_currency": "usd",  
        "days": 1,  
    }

    url = base_url.format(token_address=token_address)
    response = requests.get(url, params=params)

    if response.status_code == 200:
        data = response.json()
        prices = data["prices"]
        return prices
    else:
        raise Exception("Failed to fetch data. Status Code: {}".format(response.status_code))

if __name__ == "__main__":
    
    token_address = "0x7EA2be2df7BA6E54B1A9C70676f668455E329d29"

    try:
        token_prices = get_token_prices(token_address)
        print("Token Prices for the Past Day:")
        for timestamp, price in token_prices:
            print(f"Timestamp: {timestamp}, Price: {price}")

    except Exception as e:
        print("An error occurred:", e)
